<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="mybatis.mapper.member">	

	<resultMap type="member" id="memVo">
		<result column="email" property="email" />
		<result column="password" property="password" />
		<result column="birth" property="birth" />
		<result column="address" property="address" />
		<result column="phone" property="phone" />
		<result column="name" property="name" />
		<result column="nickname" property="nickname" />
	</resultMap>
	
	<sql id="selectAllMember">
		select * from member
	</sql>
	
	<select id="selectAll" resultType="member">
		<include refid="selectAllMember"/>
		order by email ASC
	</select>
	
	<select id="selectByEmail" resultType="member" parameterType="String">
		<include refid="selectAllMember"/>
		WHERE email=#{email}
	</select>
	
	<select id="selectByName" resultMap="memVo"  parameterType="String">
		<include refid="selectAllMember"/>
		WHERE name=#{name}
	</select>
	
	<select id="selectCount" resultType="int">
		SELECT count(*) FROM member
	</select>
	
	<select id="getNickName" resultType="int" parameterType="String">
		select count(*) from
		member
		where nickname =#{nickname}
	</select>
	
	<select id="getEmail" resultType="int" parameterType="String">
		select count(*) from
		member
		where email =#{email}
	</select>
	
	<insert id="insertMember" parameterType="member">
		INSERT INTO member (email, password,birth, address, phone,name,nickname)
		VALUES(#{email},#{password},#{birth},
			   #{address},#{phone},#{name},#{nickname})
	</insert>
	
	<update id="updateMember" parameterType="member">
		UPDATE member 
		SET name =#{name},birth=#{birth},address=#{address},
			phone=#{phone}
		WHERE email=#{email}
	</update>
	
</mapper>